{%  extends 'base.html' %}
{% load static %}
{% block title %} {{ title }} {% endblock %}
{% block sidebar %} {% endblock %}
{% block content %}

    <form method="post">{% csrf_token %}
<!--        {{ form.as_ul }}-->
      <p>
        {{ form.username.label_tag }}<br>
        {{ form.username }}
          <small>{{ form.username.help_text }}</small>
        {% for error in form.username.errors %}<p style="color: red">{{ error }}</p>{% endfor %}
      </p>

      <p>
        {{ form.email.label_tag }}<br>
        {{ form.email }}
          <small>{{ form.email.help_text }}</small>
        {% for error in form.email.errors %}<p style="color: red">{{ error }}</p>{% endfor %}
      </p>

      <p>
        {{ form.password1.label_tag }}<br>
        {{ form.password1 }}
          <input type="checkbox" id="show_pwd1" onclick ="showPassword()"> Show
          <br>
          <small>{{ form.password1.help_text }}</small>
        {% for error in form.password1.errors %}<p style="color: red">{{ error }}</p>{% endfor %}
      </p>

      <p>
        {{ form.password2.label_tag }}<br>
        {{ form.password2 }}
          <input type="checkbox" id="show_pwd2" onclick ="showPassword()"> Show
          <br>
          <small>{{ form.password2.help_text }}</small>
        {% for error in form.password2.errors %}<p style="color: red">{{ error }}</p>{% endfor %}
      </p>
        <br><br>
        <input type="submit" value="Registered">

    </form>
<script type="text/javascript">
function showPassword()
{
    if(document.getElementById("show_pwd1").checked)
        {document.getElementById("id_password1").type="text";}
    else
        {document.getElementById("id_password1").type="password";}

    if(document.getElementById("show_pwd2").checked)
        {document.getElementById("id_password2").type="text";}
    else
        {document.getElementById("id_password2").type="password";}
}
</script>
<br><br><br>



<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

<!-- Кнопка-триггер модального окна -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
  Login to CRM
</button>

<!-- Модальное окно -->
<div class="modal modal-dialog-scrollable" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Login to CRM</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form method="post" action="{% url 'login' %}">
          {% csrf_token %}
          <p>
            <label for="id_username">Login:</label><br>
            <input type="text" name="username" maxlength="150" required id="id_username">
          </p>
          <p>
            <label for="id_password">Password:</label><br>
            <input type="password" name="password" required id="id_password">
            <input type="checkbox" id="show_pwd" onclick ="showPassword()"> Show
          </p>
          <br>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Login</button>
          </div>
        </form>
      </div>
      <script type="text/javascript">
        function showPassword()
        {
          if(document.getElementById("show_pwd").checked)
              {document.getElementById("id_password").type="text";}
          else
              {document.getElementById("id_password").type="password";}
        }
       </script>
    </div>
  </div>
</div>


{% endblock %}
